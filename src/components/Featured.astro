---
import Modal from "./Featured/Modal.astro";
import ParentProjectCard from "./Featured/ParentProjectCard.astro";
import { getCollection } from "astro:content";

// Get all entries from a collection.
// Requires the name of the collection as an argument.
const projects = (await getCollection("projects")).sort(
  (a, b) => b.data.order.valueOf() - a.data.order.valueOf()
);
---

<section
  id="work"
  class="py-2 mb-8 md:py-4 lg:py-7 xl:py-10 px-6 max-w-400 mx-auto flex flex-col items-center"
  transition:animate="fade"
>
  <div class="text-center mt-1 mb-4 md:mb-8">
    <div style="opacity: 1; transform: none;">
      <h2
        class="font-heading text-3xl md:text-4xl lg:text-5xl xl:text-6xl text-primary mb-2 md:mb-4 lg:mb-6"
      >
        Featured Projects
      </h2>
    </div>
  </div>
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-3 w-full md:w-3/4 gap-y-6">
    {
      projects.map(
        (project: {
          id: string;
          data: {
            images: string[];
            client: string;
            year?: number[];
            order?: number;
            title: string;
            blurb: string;
            iframe?: string;
            projectType?: string;
          };
        }) => <ParentProjectCard project={project} />
      )
    }
  </div>
  <Modal projects={projects} />
</section>
